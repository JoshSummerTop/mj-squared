<div class="container mx-auto p-4">
  <% if user_signed_in? && CommunityCategory.any? %>
    <div class="mb-6 flex justify-between items-center">
      <div class="flex gap-3">
        <%= link_to new_space_path,
                   data: { turbo_frame: subscribed? ? "modal" : "_top" },
                   class: "btn btn-primary" do %>
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
          Create New Space
        <% end %>
      </div>
    </div>
  <% end %>
  
  <div class="my-8">
    <h1 class="h1 mb-6">Community Spaces</h1>

    <turbo-frame id="community_content">
      <div class="filter-tabs">
        <%= link_to 'All', root_path(tab: 'all', age_group: params[:age_group]), class: "filter-tab#{params[:tab] == 'all' ? ' active' : ''}", aria: { current: params[:tab] == 'all' }, data: { turbo_frame: "community_content" } %>
        <% @categories.each do |cat| %>
          <%= link_to cat.name, root_path(tab: cat.slug, age_group: params[:age_group]), 
              class: "filter-tab#{params[:tab] == cat.slug ? ' active' : ''}", 
              aria: { current: params[:tab] == cat.slug }, 
              data: { turbo_frame: "community_content" } %>
        <% end %>
      </div>
      
      <%= render partial: "community_content" %>
    </turbo-frame>
    

  </div>
</div>

<style>
.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Smooth hover animations */
.your-space-card {
  transform-origin: center;
}

.community-card {
  transform-origin: center;
}

/* Navigation button states */
.swiper-button-prev[style*="opacity: 0.3"],
.swiper-button-next[style*="opacity: 0.3"] {
  cursor: not-allowed;
}

.swiper-button-prev[style*="opacity: 0.3"]:hover,
.swiper-button-next[style*="opacity: 0.3"]:hover {
  transform: translateY(-50%) !important;
  border-color: #e5e7eb !important;
  color: #9ca3af !important;
}


</style>
